#Item Exchange

Item Exchange is a minecraft shop mod that enables different chests (and other inventory blocks) to perform an exchange of items with a player. The two items which an inventory block and player can exchange are defined by special rule items stored in the inventory block. An exchange rule item is a stone button generated by via the mod which contains information detailing either the input or output item stack of an exchange within its lore. For an inventory block to perform an exchange it must contain both an input exchange rule item and an output exchange rule item, if it does when a player left clicks it while holding the correct input item type an exchange will be conducted.

##Interacting with exchanges

When a player left clicks an inventory block containing exchange rules it will first report the input and outputs of the exchange. If the player subsequently clicks the inventory block while holding the current input an exchange between the player and the inventory block will be conducted. An inventory block may contain multiple sets of input and output rules, if this is the case then the player can cycle through the different exchanges by clicking on the inventory block with their fist.

##Commands to create and edit exchanges

###/iecreate (or /iec) [input or output] [common name or ID:durability] [amount]

This creates the exchange rule items required for an item exchange to function, the command has multiple functionalities:
-  If used when a player is looking at an acceptable inventory block (for example a chest) which the player has citadel governed access to it will attempt to create exchange rule items within that inventory block. The inventory block must contain only two different kind of items, although these items may be present in multiple stacks. The first item present in the inventory is assumed to be the player input and the second item the inventory block output.
-  If an input or output is specified this command will create an item exchange rule that represents the item stack held in the players hand and place it in the players inventory.
-  If common name* (example: Blue Wool)or a material ID:durability (example: 35:11) is specified in addition to an input or output an exchange rule item is generated within the players inventory representing the specified ItemStack with an amount of one.
-  If an amount is specified this command performs similiar to the one above except with an amount set as specified.

###/ieset (or /ies) \<field\> [value] [modifier]

This command allows you to change specific values of the exchange rule item held in the players hand.

The fields which may be set with this command are as follows:
-  commonname (or c)
-  material (or m)
-  durability (or d)
-  amount (or a)
-  enchantment (or e)
-  displayname (or n)
-  lore (or l)
-  switchio (or s)

For all fields except switch io a value must be specified. switchio simply toggles the exchange rule between an input and output rule. enchantment must have also specify a modifier of "required" or "excluded", this specifies whether the enchantment is required for the exchange or prohibited from the exchange, enchantments not included in either of these categories are ignored during exchanges. Multiple lines of lore can be entered by placing a ";" at each linebreak.

##Bulk exchange rules
It is possible to merge multiple exchange rules into one item by putting them all in a crafting grid together. This will create a bulk exchange rule.
-  Any amount of exchange rules and bulk exchange rules can be put into the grid to craft a new bulk exchange rule.
-  Dropping a bulk exchange rule will convert it into the exchange rules that it represented.

##Redstone support
After a successful transaction, the item exchange will power a button attached to the block behind the exchange. (only works for chests, trapped chests, and furnaces, currently)
![Image showing a button behind a chest.](http://imgur.com/OQaoaVu.png)
![Another image showing a button behind a chest.](http://imgur.com/nGnu83v.png)

##Other Notes
-  To increase usability where possible the english displayed name (referred to as "common name") is used in place of the bukkit material name and durability value.
-  Current accepted inventory blocks are chests, double chests, dispensors, trapped chests and double trapped chests. Nothing prohibits additional inventory blocks from being added except for testing time.
